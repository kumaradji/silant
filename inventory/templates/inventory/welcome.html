<!-- inventory/templates/inventory/welcome.html -->
{% extends 'inventory/base.html' %}
{% load static %}

{% block title %}Приветственная страница{% endblock %}

{% block content %}
<main>
    <section>
        <form method="GET" action="{% url 'welcome' %}">
            <label for="serial_number">Заводской номер:</label>
            <input type="text" id="serial_number" name="serial_number">
            <button type="submit">Поиск</button>
        </form>
        {% if machines %}
            <table>
                <thead>
                    <tr>
                        <th>Модель техники</th>
                        <th>Зав. № машины</th>
                        <th>Модель двигателя</th>
                        <th>Модель трансмиссии</th>
                        <th>Модель ведущего моста</th>
                        <th>Модель управляемого моста</th>
                        <th>Дата отгрузки с завода</th>
                        <th>Покупатель</th>
                        <th>Грузополучатель</th>
                        <th>Адрес поставки</th>
                    </tr>
                </thead>
                <tbody>
                    {% for machine in machines %}
                    <tr>
                        <td>{{ machine.model_technique }}</td>
                        <td>{{ machine.serial_number }}</td>
                        <td>{{ machine.model_engine }}</td>
                        <td>{{ machine.model_transmission }}</td>
                        <td>{{ machine.model_drive_axle }}</td>
                        <td>{{ machine.model_steering_axle }}</td>
                        <td>{{ machine.shipment_date }}</td>
                        <td>{{ machine.customer.username }}</td>
                        <td>{{ machine.service_company.username }}</td>
                        <td>{{ machine.delivery_contract }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% elif machines is not None %}
            <p>Данных о машине с таким заводским номером нет в системе.</p>
        {% endif %}
    </section>
</main>
{% endblock %}